import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as a,e}from"./app-DXZsKAOQ.js";const t={},p=e(`<h1 id="rvs-3-反盗版" tabindex="-1"><a class="header-anchor" href="#rvs-3-反盗版"><span>rvs.3 反盗版</span></a></h1><h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言"><span>前言</span></a></h2><p>此文档将带你认识反盗版（Anti-piracy，AP）的原理，理解MOD反盗版系统的构造</p><h2 id="_0-0-什么时候使用ap机制" tabindex="-1"><a class="header-anchor" href="#_0-0-什么时候使用ap机制"><span>0.0 什么时候使用AP机制？</span></a></h2><p>在您为您的MOD付出很大心血时，不想被盗版玩家无情滥用</p><p>遏制盗版玩家的猖狂（毕竟你游盗版玩家真的多又恶心。不包括会在将来补票的的玩家）</p><p>不建议滥用AP机制</p><h2 id="_1-0-原理" tabindex="-1"><a class="header-anchor" href="#_1-0-原理"><span>1.0 原理</span></a></h2><p>自Ravenfield在EA20（？）去除UFO反盗版机制（一大群UFO在头顶飞击杀玩家）后，相当（？）一部分MODDER开始转入自开发反盗版机制</p><p>按大多数MOD采用的方案，都是用判断<code>Player.actor.name</code>是否等于&quot;<code>Unknown Player</code>&quot;？来确定游戏是否为盗版</p><p>使用这原理的缘由是因为这是游戏提供的唯一一个可用Api（毕竟你游限制了外来C#的导入，C#使用SteamworksAPI进行盗版验证会更加地准确。即使是在正版环境，如果Steam不在后台，<code>Player.actor.name</code>仍等于&quot;<code>Unknown Player</code>&quot;，这是一个问题。此处仍可以通过***dll进行规避</p><p>而且当Steam在后台时（即正版的运行环境）时，Steamworks API会传入用户名到游戏来填充<code>Player.actor.name</code>，即使Steam用户名未设置似乎也不会为&quot;<code>Unknown Player</code>&quot;？</p><p>有了原理，我们就可以继续添加触发操作了</p><div class="language-lua line-numbers-mode" data-ext="lua" data-title="lua"><pre class="language-lua"><code><span class="token function">behaviour</span><span class="token punctuation">(</span><span class="token string">&quot;APSystem&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">local</span> enableAP <span class="token operator">=</span> <span class="token keyword">false</span>


<span class="token keyword">function</span> APSystem<span class="token punctuation">:</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Player<span class="token punctuation">.</span>actor<span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">&quot;Unknown Player&quot;</span> <span class="token keyword">and</span> GameManager<span class="token punctuation">.</span>isTestingContentMod !<span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">)</span> <span class="token keyword">then</span> <span class="token comment">--当...且游戏不处于测试模式时...</span>
	   self<span class="token punctuation">.</span>enableAP <span class="token operator">=</span> ture
	<span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token keyword">function</span> APSystem<span class="token punctuation">:</span><span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> self<span class="token punctuation">.</span>enableAP <span class="token operator">==</span> ture <span class="token keyword">then</span>
    	<span class="token comment">--放入你的触发操作</span>
	<span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-0-触发操作" tabindex="-1"><a class="header-anchor" href="#_2-0-触发操作"><span>2.0 触发操作</span></a></h2><p>当到这一步时，你可以做的操作很多</p><p>如阻止玩家进行游戏（血量清零、删除地图场景内所有物体）：</p><div class="language-lua line-numbers-mode" data-ext="lua" data-title="lua"><pre class="language-lua"><code>Player<span class="token punctuation">.</span><span class="token function">MoveActor</span><span class="token punctuation">(</span><span class="token function">Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">--阻止玩家移动</span>

Player<span class="token punctuation">.</span>actor<span class="token punctuation">.</span>health <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">--玩家血量清零</span>

SpawnUi<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">--打开武器选择界面来阻止玩家游戏</span>

Player<span class="token punctuation">.</span>activeWeapon<span class="token punctuation">.</span><span class="token function">LockWeapon</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">--锁定玩家武器</span>

Time<span class="token punctuation">.</span>timeScale <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">--阻止玩家暂停游戏</span>

<span class="token comment">--删除游戏内物体，但这会直接卡崩游戏</span>
gameObjects <span class="token operator">=</span> GameObject<span class="token punctuation">.</span><span class="token function">FindObjectsOfType</span><span class="token punctuation">(</span>GameObject<span class="token punctuation">)</span>
<span class="token keyword">for</span> x<span class="token punctuation">,</span> y <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>gameObjects<span class="token punctuation">)</span> <span class="token keyword">do</span>  
    GameObject<span class="token punctuation">.</span><span class="token function">Destroy</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span>
<span class="token keyword">end</span> 

<span class="token comment">--替换游戏内的所有Text</span>
gameObjects <span class="token operator">=</span> GameObject<span class="token punctuation">.</span><span class="token function">FindObjectsOfType</span><span class="token punctuation">(</span>Text<span class="token punctuation">)</span>
<span class="token keyword">for</span> x<span class="token punctuation">,</span> y <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>gameObjects<span class="token punctuation">)</span> <span class="token keyword">do</span>
    y<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&quot;TEST&quot;</span>
<span class="token keyword">end</span>

<span class="token comment">--播放特定音频（假设音频的AudioSource在apAS这个变量）</span>
apAS<span class="token punctuation">.</span><span class="token function">SetOutputAudioMixer</span><span class="token punctuation">(</span>AudioMixer<span class="token punctuation">.</span>FirstPerson<span class="token punctuation">)</span>  <span class="token comment">--将AS组件的Output设置为玩家的</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不推荐使用jumpscare（极度不推荐）、强制传教等方式来恐吓盗版玩家</p><p>毕竟做人留一线，日后好相见</p><p>自己也有可能被自己的AP机制吓到</p><p>做人不要做太死</p><p>适度就好</p><h2 id="_2-1-混淆机制" tabindex="-1"><a class="header-anchor" href="#_2-1-混淆机制"><span>2.1 混淆机制</span></a></h2><p>防止盗版玩家通过分批测试找到带AP机制的MOD</p><p>此规避机制包括延时&amp;随机启动AP</p><h2 id="_3-0-应用" tabindex="-1"><a class="header-anchor" href="#_3-0-应用"><span>3.0 应用</span></a></h2><p>在介绍完原理与操作后，相信您应该可以自行构建一个反盗版脚本了</p><p>祝您好运！（〃｀ 3′〃）</p>`,29),o=[p];function c(l,i){return s(),a("div",null,o)}const d=n(t,[["render",c],["__file","rvs.3.html.vue"]]),k=JSON.parse('{"path":"/cn/Tutorials/rvs.3.html","title":"rvs.3 反盗版","lang":"zh-CN","frontmatter":{"category":["教程"],"head":[["meta",{"property":"og:url","content":"https://ravenfieldcommunity.github.io/docs/cn/Tutorials/rvs.3.html"}],["meta",{"property":"og:site_name","content":"Ravenfield社区文档"}],["meta",{"property":"og:title","content":"rvs.3 反盗版"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-07-25T13:24:54.000Z"}],["meta",{"property":"article:modified_time","content":"2024-07-25T13:24:54.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"rvs.3 反盗版\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-07-25T13:24:54.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"前言","slug":"前言","link":"#前言","children":[]},{"level":2,"title":"0.0 什么时候使用AP机制？","slug":"_0-0-什么时候使用ap机制","link":"#_0-0-什么时候使用ap机制","children":[]},{"level":2,"title":"1.0 原理","slug":"_1-0-原理","link":"#_1-0-原理","children":[]},{"level":2,"title":"2.0 触发操作","slug":"_2-0-触发操作","link":"#_2-0-触发操作","children":[]},{"level":2,"title":"2.1 混淆机制","slug":"_2-1-混淆机制","link":"#_2-1-混淆机制","children":[]},{"level":2,"title":"3.0 应用","slug":"_3-0-应用","link":"#_3-0-应用","children":[]}],"git":{"createdTime":1677332562000,"updatedTime":1721913894000,"contributors":[{"name":"Leafx-code","email":"82655578+Leafx-code@users.noreply.github.com","commits":3},{"name":"KeilAwk","email":"82655578+KeilAwk@users.noreply.github.com","commits":1}]},"filePathRelative":"cn/Tutorials/rvs.3.md","localizedDate":"2023年2月25日"}');export{d as comp,k as data};
